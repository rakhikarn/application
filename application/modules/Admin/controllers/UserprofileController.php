<?phpclass Admin_UserprofileController extends Admin_Controller_Action_Abstract {    public function editAction() {        $form = new Admin_Form_Userprofile();        $storage = new Zend_Auth_Storage_Session();        $data = $storage->read();//echo '<pre>';print_r($data);echo '<pre>';exit();        $user_id = $data['admin_user_id'];//user type cant be changed from profile        $form->removeElement('usertype');        $form->removeElement('status');                          //  $status = $form->getValue('status');'        $form->submit->setLabel('Save');        $this->view->form = $form;        $id = $this->_getParam('id', 0);        $pc = new Admin_Model_DbTable_Users();                if ($this->getRequest()->isPost()) {            $formData = $this->getRequest()->getPost();            if ($form->isValid($formData)) {                $email = $form->getValue('email');                $oldpassword = md5($form->getValue('oldpassword'));                $password = md5($form->getValue('npassword'));                $firstname = $form->getValue('firstname');                $lastname = $form->getValue('lastname');                $phone = $form->getValue('phone');                $gsm = $form->getValue('gsm');                $company = $form->getValue('company');                $datesx = Zend_Date::now();                $original = time($datesx);//echo $original;exit();                $regdate = date("Y-m-d H:i:s", $original);                $pc = new Admin_Model_DbTable_Users();                $data = array('email' => $email, 'password' => $password, 'firstname' => $firstname, 'lastname' => $lastname, 'phone' => $phone,                    'gsm' => $gsm, 'company' => $company, 'regdate' => $regdate);                $passx = $pc->fetchRow('id = ' . $id);//echo '<pre>';print_r($passx);echo '</pre>';exit();//echo count($passx);exit();                if ($oldpassword != $passx->password) {//echo 'aaaaa';exit();                    $this->view->message = "Error !!! Old Password does not match !!!";                    $form->populate($formData);                } else {                    $pc->update($data, 'id = ' . $id);                    $this->_helper->redirector('list');                }            } else {                $form->populate($formData);            }        } else {            $row = $pc->fetchRow('id = ' . $id);            if (!$row) {                throw new Exception("Could not find row $id");            }            $form->populate($row->toArray());            //echo 'ttttt'; print_r($row->toArray()); exit();        }    }    public function listAction() {            }}